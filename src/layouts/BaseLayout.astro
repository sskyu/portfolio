---
import '../styles/global.css';
import ThemeToggle from '../components/ThemeToggle.astro';
import { Image } from 'astro:assets';
import avatarImage from '../assets/avatar.png';

interface Props {
	title: string;
	description?: string;
}

const { title, description = "My Portfolio Site" } = Astro.props;
---

<!doctype html>
<html lang="ja">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/png" href="/favicon.png" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
		<meta name="description" content={description} />
		<script is:inline>
			const theme = (() => {
				if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
					return localStorage.getItem('theme');
				}
				if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
					return 'dark';
				}
				return 'light';
			})();
		
			if (theme === 'light') {
				document.documentElement.setAttribute('data-theme', 'light');
			} else {
				document.documentElement.setAttribute('data-theme', 'dark');
			}
			window.localStorage.setItem('theme', theme);
		</script>
	</head>
	<body>
		<header>
			<h1>
				<a href="/" class="site-title">
					<Image src={avatarImage} alt="sskyu" width={32} height={32} />
					sskyu
				</a>
			</h1>
			<nav>
				<ul>
					<li>
						<a href="/blog">Blog</a>
					</li>
					<li>
						<a href="https://github.com/sskyu/" aria-label="GitHub" target="_blank" rel="noopener noreferrer">
							<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.28 1.15-.28 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg>
						</a>
					</li>
					<li><ThemeToggle /></li>
				</ul>
			</nav>
		</header>

<style>
	.site-title {
		display: flex;
		align-items: center;
		gap: 0.75rem;
		text-decoration: none;
		color: var(--text-color);
		font-size: 1.5rem;
	}
	.site-title img {
		border-radius: 50%;
		border: 1px solid var(--header-border);
	}
	nav ul li a {
		display: flex;
		align-items: center;
	}
</style>
		<main>
			<slot />
		</main>
		<footer>
			<p>&copy; {new Date().getFullYear()} sskyu</p>
		</footer>
		<!-- Google tag (gtag.js) -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3PGT2JBL2"></script>
		<script is:inline>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());
			gtag('config', 'G-R3PGT2JBL2');
		</script>
	</body>
</html>
